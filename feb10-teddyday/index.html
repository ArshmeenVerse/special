<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Teddy Day, Bubu! ğŸ§¸</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="photobooth.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Quicksand:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <!-- Tenor Embed Script -->
    <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
</head>

<body>

    <!-- Background Music Control -->
    <div class="music-control" style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        <button id="music-toggle" class="icon-btn" aria-label="Toggle background music"
            style="background: rgba(141, 110, 99, 0.8); border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; color: white; font-size: 1.2rem; backdrop-filter: blur(10px);">
            <i class="fas fa-music"></i>
        </button>
        <audio id="bg-music" loop preload="auto">
            <source src="assets/background_music_new.mp4" type="audio/mp4">
            Your browser does not support the audio element.
        </audio>
    </div>

    <!-- Overlay for Music Play Popup -->
    <div id="start-overlay" class="overlay"
        style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85); display: flex; align-items: center; justify-content: center; z-index: 9999; transition: opacity 0.8s ease;">
        <div class="music-popup"
            style="text-align: center; padding: 3rem; background: linear-gradient(135deg, #FAD4C0 0%, #F5C6B8 100%); border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
            <h2 class="popup-title"
                style="font-family: 'Quicksand', sans-serif; font-size: 2rem; color: #8D6E63; margin-bottom: 1rem;">
                Start the Magic? âœ¨</h2>
            <p class="popup-subtitle" style="font-family: 'Nunito', sans-serif; color: #8D6E63; margin-bottom: 2rem;">
                Turn up the volume for the best experience</p>
            <button id="start-btn" class="play-start-btn"
                style="background: #8D6E63; color: white; border: none; border-radius: 50%; width: 80px; height: 80px; font-size: 2rem; cursor: pointer; transition: transform 0.3s ease;">
                <i class="fas fa-play"></i>
            </button>
        </div>
    </div>

    <!-- Background Elements -->
    <div id="ambient-glow"></div>
    <div id="particles-container"></div>
    <div class="cozy-frame"></div>

    <!-- Main Content Wrapper -->
    <main>
        <!-- Section 1: Hero (Soft Arrival) -->
        <section id="hero-section" class="screen-section">
            <div class="teddy-container">
                <!-- Teddy Video -->
                <video autoplay loop muted playsinline style="width: 100%; height: auto; object-fit: contain;">
                    <source src="assets/teddy-hero.mp4" type="video/mp4">
                </video>
                <div class="glow-effect"></div>
            </div>

            <div class="hero-text">
                <h2 id="teddy-name-label">Your Bubu ğŸ§¸</h2>
                <h1 class="fade-in">A hug, just for my Bubu.</h1>
                <p class="subtext fade-in-delay">Even when Iâ€™m not thereâ€¦ this is.</p>
            </div>
        </section>

        <!-- Section 2: Hold to Hug -->
        <section id="hug-section" class="content-section">
            <div class="decorative-item" style="left: 10%; top: 20%;">âœ¨</div>
            <div class="decorative-item" style="right: 15%; bottom: 20%;">âœ¨</div>

            <p class="instruction-text">Tap for a Hug ğŸ§¸</p>
            <button id="hug-btn" class="hug-button">
                <span class="hug-icon">ğŸ¤—</span>
                <span class="hug-text">Hug Me</span>
            </button>
            <p id="hug-message" class="hidden-message">That's how tight I'd hug you.</p>

            <!-- Bear Hug Animation Result -->
            <div id="hug-animation-result" class="hidden-message" style="margin-top: 2rem; text-align: center;">
                <video id="hug-video" autoplay loop muted playsinline
                    style="max-width: 300px; width: 100%; border-radius: 20px; box-shadow: 0 8px 32px rgba(141, 110, 99, 0.3);">
                    <source src="assets/bear-hug.mp4" type="video/mp4">
                </video>
            </div>
        </section>

        <!-- Section 3: Rename Teddy -->
        <section id="rename-section" class="content-section">
            <div class="decorative-item" style="left: 20%; top: -10%;">ğŸ€</div>
            <h2>Do you want to rename Your Bubu?</h2>
            <div class="input-wrapper">
                <input type="text" id="teddy-name-input" placeholder="Your Bubu" value="Your Bubu">
                <button id="save-name-btn"><i class="fas fa-check"></i></button>
            </div>
        </section>

        <!-- Section 4: Comfort Cards -->
        <section id="comfort-section" class="content-section">
            <h2 class="section-title">Whenever you feelâ€¦</h2>
            <div class="decorative-cloud" style="right: -5%; top: 10%; font-size: 4rem;">â˜ï¸</div>
            <div class="cards-container">
                <div class="comfort-card" data-type="overwhelmed">
                    <div class="card-front">
                        <span class="emoji">ğŸ˜”</span>
                        <span>Overwhelmed</span>
                    </div>
                    <div class="card-back">
                        <p>Iâ€™ll listen. Always.</p>
                    </div>
                </div>
                <div class="comfort-card" data-type="tired">
                    <div class="card-front">
                        <span class="emoji">ğŸ˜´</span>
                        <span>Tired</span>
                    </div>
                    <div class="card-back">
                        <p>Rest here. You donâ€™t have to be strong.</p>
                    </div>
                </div>
                <div class="comfort-card" data-type="lost">
                    <div class="card-front">
                        <span class="emoji">ğŸ’­</span>
                        <span>Lost in thoughts</span>
                    </div>
                    <div class="card-back">
                        <p>Weâ€™ll figure it out together.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Personal Letter -->
        <section id="letter-section" class="content-section">
            <div class="paper-card">
                <div class="decorative-item" style="right: 20px; top: 20px; font-size: 1.2rem;">ğŸ“Œ</div>
                <div class="typewriter-text" id="letter-content">
                    <!-- Text will be typed here via JS -->
                </div>
            </div>
        </section>

        <!-- Section 5.5: Video Message -->
        <section id="video-section" class="content-section">
            <h2>A special moment for you, Bubu ğŸ§¸</h2>
            <div
                style="position: relative; max-width: 600px; margin: 2rem auto; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(141, 110, 99, 0.3);">
                <video id="teddy-video" style="width: 100%; height: auto; display: block;" playsinline muted>
                    <source src="assets/teddy_video.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <button id="video-play-btn"
                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(141, 110, 99, 0.9); color: white; border: none; border-radius: 50%; width: 70px; height: 70px; font-size: 2rem; cursor: pointer; backdrop-filter: blur(10px); transition: all 0.3s ease;">
                    <i class="fas fa-play"></i>
                </button>
            </div>
        </section>

        <!-- Section 6: Voice Message -->
        <section id="voice-section" class="content-section">
            <div class="decorative-item" style="left: 10%; bottom: 10%;">ğŸ’¤</div>
            <h2>Close your eyes for a momentâ€¦</h2>
            <div class="audio-player">
                <button id="play-pause-btn"><i class="fas fa-play"></i></button>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="audio-progress"></div>
                </div>
                <audio id="voice-msg" src="assets/voice_message.mp3"></audio> <!-- Placeholder -->
            </div>
            <p id="voice-end-msg" class="hidden-message">Iâ€™m right here.</p>
        </section>

        <!-- Section 7: Bubu Writes Back -->
        <section id="reply-section" class="content-section">
            <h2>What makes you feel safe? ğŸ’Œ</h2>
            <p class="subtext">I want to be that place for you.</p>

            <div class="reply-card">
                <textarea id="reply-input" maxlength="400" placeholder="Tell me what makes your heart calmâ€¦"></textarea>
                <div class="char-counter">0/400</div>
                <button id="send-reply-btn">Send Your Hug ğŸ§¸</button>
            </div>

            <div id="saved-reply-container" class="hidden">
                <p class="saved-msg-content"></p>
                <span class="saved-time"></span>
                <p class="confirmation-text">Your words are safe with me.</p>
            </div>
        </section>

        <!-- Section 7.5: Photo Booth -->
        <section id="photobooth-section" class="content-section">
            <h2>Capture This Moment ğŸ“¸</h2>
            <p class="subtext">Let's save this Teddy Day memory together</p>

            <div class="photobooth-container">
                <button id="start-camera-btn" class="action-btn">Start Camera ğŸ¥</button>

                <div id="camera-preview-container" class="hidden">
                    <div class="camera-frame">
                        <video id="camera-stream" autoplay playsinline></video>
                        <div id="countdown-overlay" class="countdown-overlay hidden"></div>
                        <div id="flash-overlay" class="flash-overlay"></div>
                    </div>
                </div>

                <button id="capture-btn" class="action-btn hidden">Capture Our Memory ğŸ§¸</button>

                <div id="result-container" class="result-container hidden">
                    <img id="photo-strip-output" alt="Photo Strip">
                    <div class="result-actions">
                        <button id="retake-btn" class="action-btn">Retake ğŸ”„</button>
                        <button id="save-btn" class="action-btn">Save Forever ğŸ’¾</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 8: Soft Ending -->
        <section id="footer-section" class="screen-section">
            <h2 class="fade-in-scroll">Youâ€™re never alone.<br>Not while Iâ€™m here.</h2>
        </section>

    </main>

    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- Teddy Day Script -->
    <script src="script.js"></script>
    <!-- Photo Booth Script -->
    <script src="../photobooth.js"></script>
</body>

</html>